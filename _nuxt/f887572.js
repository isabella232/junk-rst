(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{1126:function(t,e,r){"use strict";r.r(e);r(58),r(37),r(32),r(21),r(51),r(24);var n=r(4),o=r(23),l=r(26),c=function(t,e){var r=null;return function(){for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];r&&(clearTimeout(r),r=null),r=setTimeout((function(){return t.apply(void 0,o)}),e)}}((function(t,e){return t(e)}),400);function d(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,r)}return e}function f(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?d(Object(source),!0).forEach((function(e){Object(o.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):d(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var v=r(8).isAddress,h={data:function(){return{proposalAddress:"",description:"",title:"",isValidAddress:!0,isValidContract:!0,isValidTitle:!0,isValidDescription:!0}},computed:f(f({},Object(l.e)("governance/gov",["latestProposalId"])),{},{address:{get:function(){return this.proposalAddress},set:function(address){this.setInitialState(),this.proposalAddress=address,c(this.validateAddress,address)}},validTitle:{get:function(){return this.title},set:function(title){this.isValidTitle=!0,this.title=title}},addressErrorMessage:function(){return this.isValidAddress?this.isValidContract?this.$t("proposal.error.address"):this.$t("proposal.error.contract"):this.$t("proposal.error.address")},validDescription:{get:function(){return this.description},set:function(t){this.isValidDescription=!0,this.description=t}},hasValidAddress:function(){return this.isValidAddress&&this.isValidContract},cannotCreate:function(){return 0!==this.latestProposalId.value&&("active"===this.latestProposalId.status||"pending"===this.latestProposalId.status)}}),methods:f(f({},Object(l.b)("governance/gov",["createProposal"])),{},{addressIsContract:function(address){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){var code;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(address){e.next=2;break}return e.abrupt("return",!1);case 2:return e.next=4,t.$provider.web3.eth.getCode(address);case 4:return code=e.sent,e.abrupt("return","0x"!==code);case 6:case"end":return e.stop()}}),e)})))()},isAddress:function(address){var t=v(address);return!t&&address&&(this.isValidAddress=t),t},isContract:function(address){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.addressIsContract(address);case 2:return!(r=e.sent)&&address&&(t.isValidContract=r),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})))()},setInitialState:function(){this.isValidAddress=!0,this.isValidContract=!0},validateAddress:function(address){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.isAddress(address)){e.next=3;break}return e.abrupt("return",!1);case 3:return e.next=5,t.isContract(address);case 5:return r=e.sent,e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})))()},validationForms:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.isValidTitle=t.title,t.isValidDescription=t.description,t.isValidAddress=t.proposalAddress,e.next=5,t.validateAddress(t.proposalAddress);case 5:return r=e.sent,e.abrupt("return",r&&t.isValidAddress&&t.isValidTitle&&t.isValidDescription);case 7:case"end":return e.stop()}}),e)})))()},onCreateProposal:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.validationForms();case 2:if(e.sent){e.next=5;break}return e.abrupt("return");case 5:return t.$store.dispatch("loading/enable",{message:t.$t("preparingTransactionData")}),e.next=8,t.createProposal({proposalAddress:t.proposalAddress,title:t.title,description:t.description});case 8:t.$store.dispatch("loading/disable");case 9:case"end":return e.stop()}}),e)})))()}})},m=r(14),w={components:{CreateProposal:Object(m.a)(h,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"proposal"},[r("h1",{staticClass:"title"},[t._v(t._s(t.$t("createProposal")))]),t._v(" "),r("div",{staticClass:"columns is-multiline"},[r("div",{staticClass:"column is-6"},[r("b-field",{attrs:{label:t.$t("proposalTitle"),message:t.isValidTitle?"":t.$t("proposal.error.title"),type:{"is-warning":!t.isValidTitle}}},[r("b-input",{attrs:{placeholder:t.$t("title")},model:{value:t.validTitle,callback:function(e){t.validTitle=e},expression:"validTitle"}})],1)],1),t._v(" "),r("div",{staticClass:"column is-6"},[r("b-field",{attrs:{label:t.$t("proposalAddress"),type:{"is-warning":!t.hasValidAddress},message:t.hasValidAddress?"":t.addressErrorMessage}},[r("b-input",{attrs:{placeholder:t.$t("proposalAddress"),size:t.address?t.hasValidAddress?"":"is-warning":""},model:{value:t.address,callback:function(e){t.address=e},expression:"address"}})],1)],1),t._v(" "),r("div",{staticClass:"column is-12"},[r("b-field",{attrs:{message:t.isValidDescription?"":t.$t("proposal.error.description"),type:{"is-warning":!t.isValidDescription},label:t.$t("proposalDescription")}},[r("b-input",{attrs:{maxlength:"2000",type:"textarea"},model:{value:t.validDescription,callback:function(e){t.validDescription=e},expression:"validDescription"}})],1)],1)]),t._v(" "),r("b-tooltip",{attrs:{label:""+t.$t("onlyOneProposalErr"),position:"is-top",active:t.cannotCreate,multilined:""}},[r("b-button",{attrs:{disabled:t.cannotCreate,type:"is-primary","icon-left":"plus",outlined:""},on:{click:t.onCreateProposal}},[t._v("\n      "+t._s(t.$t("createProposal"))+"\n    ")])],1)],1)}),[],!1,null,null,null).exports},methods:{onBack:function(){this.$router.push({path:"/governance"})}}},O=Object(m.a)(w,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("b-button",{attrs:{type:"is-back","icon-left":"arrow-left"},on:{click:this.onBack}},[this._v("\n    Back\n  ")]),this._v(" "),e("CreateProposal",{on:{onBack:this.onBack}})],1)}),[],!1,null,null,null);e.default=O.exports}}]);