(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{1107:function(t,e,r){var n=r(41);t.exports=function(t,e){if(!n(t)||t._t!==e)throw TypeError("Incompatible receiver, "+e+" required!");return t}},1117:function(t,e,r){"use strict";var strong=r(1118),n=r(1107);t.exports=r(1119)("Set",(function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}}),{add:function(t){return strong.def(n(this,"Set"),t=0===t?0:t,t)}},strong)},1118:function(t,e,r){"use strict";var n=r(48).f,o=r(161),c=r(503),l=r(86),d=r(501),h=r(502),m=r(283),v=r(505),f=r(284),y=r(42),_=r(280).fastKey,w=r(1107),x=y?"_s":"size",O=function(t,e){var r,n=_(e);if("F"!==n)return t._i[n];for(r=t._f;r;r=r.n)if(r.k==e)return r};t.exports={getConstructor:function(t,e,r,m){var v=t((function(t,n){d(t,v,e,"_i"),t._t=e,t._i=o(null),t._f=void 0,t._l=void 0,t[x]=0,null!=n&&h(n,r,t[m],t)}));return c(v.prototype,{clear:function(){for(var t=w(this,e),data=t._i,r=t._f;r;r=r.n)r.r=!0,r.p&&(r.p=r.p.n=void 0),delete data[r.i];t._f=t._l=void 0,t[x]=0},delete:function(t){var r=w(this,e),n=O(r,t);if(n){var o=n.n,c=n.p;delete r._i[n.i],n.r=!0,c&&(c.n=o),o&&(o.p=c),r._f==n&&(r._f=o),r._l==n&&(r._l=c),r[x]--}return!!n},forEach:function(t){w(this,e);for(var r,n=l(t,arguments.length>1?arguments[1]:void 0,3);r=r?r.n:this._f;)for(n(r.v,r.k,this);r&&r.r;)r=r.p},has:function(t){return!!O(w(this,e),t)}}),y&&n(v.prototype,"size",{get:function(){return w(this,e)[x]}}),v},def:function(t,e,r){var n,o,c=O(t,e);return c?c.v=r:(t._l=c={i:o=_(e,!0),k:e,v:r,p:n=t._l,n:void 0,r:!1},t._f||(t._f=c),n&&(n.n=c),t[x]++,"F"!==o&&(t._i[o]=c)),t},getEntry:O,setStrong:function(t,e,r){m(t,e,(function(t,r){this._t=w(t,e),this._k=r,this._l=void 0}),(function(){for(var t=this._k,e=this._l;e&&e.r;)e=e.p;return this._t&&(this._l=e=e?e.n:this._t._f)?v(0,"keys"==t?e.k:"values"==t?e.v:[e.k,e.v]):(this._t=void 0,v(1))}),r?"entries":"values",!r,!0),f(e)}}},1119:function(t,e,r){"use strict";var n=r(33),o=r(27),c=r(52),l=r(503),meta=r(280),d=r(502),h=r(501),m=r(41),v=r(43),f=r(282),y=r(160),_=r(285);t.exports=function(t,e,r,w,x,O){var C=n[t],$=C,j=x?"set":"add",k=$&&$.prototype,S={},T=function(t){var e=k[t];c(k,t,"delete"==t||"has"==t?function(a){return!(O&&!m(a))&&e.call(this,0===a?0:a)}:"get"==t?function(a){return O&&!m(a)?void 0:e.call(this,0===a?0:a)}:"add"==t?function(a){return e.call(this,0===a?0:a),this}:function(a,b){return e.call(this,0===a?0:a,b),this})};if("function"==typeof $&&(O||k.forEach&&!v((function(){(new $).entries().next()})))){var P=new $,D=P[j](O?{}:-0,1)!=P,E=v((function(){P.has(1)})),A=f((function(t){new $(t)})),N=!O&&v((function(){for(var t=new $,e=5;e--;)t[j](e,e);return!t.has(-0)}));A||(($=e((function(e,r){h(e,$,t);var n=_(new C,e,$);return null!=r&&d(r,x,n[j],n),n}))).prototype=k,k.constructor=$),(E||N)&&(T("delete"),T("has"),x&&T("get")),(N||D)&&T(j),O&&k.clear&&delete k.clear}else $=w.getConstructor(e,t,x,j),l($.prototype,r),meta.NEED=!0;return y($,t),S[t]=$,o(o.G+o.W+o.F*($!=C),S),O||w.setStrong($,t,x),$}},1120:function(t,e,r){"use strict";r.r(e);r(58),r(37),r(32),r(51),r(29),r(30),r(21),r(207);var n=r(23),o=r(26);function c(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,r)}return e}function l(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(e){Object(n.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var d={computed:l(l(l(l({},Object(o.e)("mixer",["ip","statistic","selectedMixer"])),Object(o.c)("metamask",["networkConfig"])),Object(o.c)("mixer",["selectedCurrency"])),{},{latestDeposits:function(){var t=this.selectedMixer.currency.toLowerCase();return this.statistic[t][this.selectedMixer.amount].latestDeposits},anonimitySet:function(){var t=this.selectedMixer.currency.toLowerCase();return this.statistic[t][this.selectedMixer.amount].anonymitySet}}),methods:{ipInfoToRender:function(t){return t.ip&&t.city&&t.country?"".concat(t.ip,", ").concat(t.city,", ").concat(t.country):t.ip&&t.country?"".concat(t.ip,", ").concat(t.country):t.ip?"".concat(t.ip):"".concat(this.$t("loading"),"...")}}},h=r(14),m=Object(h.a)(d,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"column is-half"},[r("div",{staticClass:"box-stats"},[r("div",{staticClass:"tab-with-corner is-left-top"},[t._v("\n      "+t._s(t.$t("statistics"))+"\n      "),r("span",{staticClass:"selected"},[t._v(t._s(t.selectedMixer.amount)+" "+t._s(t.selectedCurrency))])]),t._v(" "),r("div",{staticClass:"box"},[r("div",{staticClass:"label"},[t._v("\n        "+t._s(t.$t("anonymitySet"))+"\n        "),r("b-tooltip",{attrs:{label:t.$t("anonymitySetTooltip"),size:"is-medium",position:"is-top",multilined:""}},[r("button",{staticClass:"button is-primary has-icon"},[r("span",{staticClass:"icon icon-info"})])])],1),t._v(" "),r("div",{staticClass:"field"},[t.anonimitySet?r("i18n",{attrs:{path:"equalUserDeposit"}},[t.anonimitySet>1&&t.anonimitySet<5?r("span",{attrs:{slot:"only"},slot:"only"},[t._v(t._s(t.$t("only")))]):t._e(),t._v(" "),t.anonimitySet>1?r("b",{attrs:{slot:"n"},slot:"n"},[t._v(t._s(Number(t.anonimitySet)))]):t._e(),t._v(" "),r("span",{attrs:{slot:"equalUserDepositText"},slot:"equalUserDepositText"},[t._v(t._s(t.$tc("equalUserDepositPlural",Number(t.anonimitySet))))])]):t._e(),t._v(" "),r("b-skeleton",{attrs:{size:"is-large",active:!t.anonimitySet,width:"200"}})],1),t._v(" "),r("div",{staticClass:"label"},[t._v(t._s(t.$t("latestDeposits")))]),t._v(" "),t.anonimitySet>0?r("div",{staticClass:"columns is-small is-multiline"},[r("div",{staticClass:"column is-half-small"},[r("div",{staticClass:"deposits"},t._l(t.latestDeposits.slice(0,5),(function(e){var n=e.index,o=e.depositTime;return r("div",{key:n,staticClass:"row"},[r("div",{staticClass:"value"},[t._v(t._s(Number(n)+1)+".")]),t._v(" "),r("div",{staticClass:"data"},[t._v(t._s(o))])])})),0)]),t._v(" "),r("div",{staticClass:"column is-half-small"},[r("div",{staticClass:"deposits"},t._l(t.latestDeposits.slice(5,10),(function(e){var n=e.index,o=e.depositTime;return r("div",{key:n,staticClass:"row"},[r("div",{staticClass:"value"},[t._v(t._s(Number(n)+1)+".")]),t._v(" "),r("div",{staticClass:"data"},[t._v(t._s(o))])])})),0)])]):r("div",{staticClass:"columns is-small is-multiline"},[r("div",{staticClass:"column is-half-small"},[r("div",{staticClass:"deposits"},[r("b-skeleton",{attrs:{size:"is-large"}}),t._v(" "),r("b-skeleton",{attrs:{size:"is-large"}}),t._v(" "),r("b-skeleton",{attrs:{size:"is-large"}}),t._v(" "),r("b-skeleton",{attrs:{size:"is-large"}}),t._v(" "),r("b-skeleton",{attrs:{size:"is-large"}})],1)]),t._v(" "),r("div",{staticClass:"column is-half-small"},[r("div",{staticClass:"deposits"},[r("b-skeleton",{attrs:{size:"is-large"}}),t._v(" "),r("b-skeleton",{attrs:{size:"is-large"}}),t._v(" "),r("b-skeleton",{attrs:{size:"is-large"}}),t._v(" "),r("b-skeleton",{attrs:{size:"is-large"}}),t._v(" "),r("b-skeleton",{attrs:{size:"is-large"}})],1)])])]),t._v(" "),r("div",{staticClass:"box-ip"},[r("b-tooltip",{attrs:{label:t.$t("ipTooltip"),size:"is-large",position:"is-top",multilined:""}},[r("div",{staticClass:"tab-with-corner is-right-bottom"},[t.ip.ip?r("i18n",{staticClass:"is-small",attrs:{path:"yourIP",tag:"span"},scopedSlots:t._u([{key:"ip",fn:function(){return[r("a",{staticClass:"has-text-primary",attrs:{target:"_blank",href:"https://www.torproject.org/"}},[t._v("\n                "+t._s(t.ipInfoToRender(t.ip))+"\n              ")])]},proxy:!0}],null,!1,2172037410)}):t._e(),t._v(" "),r("b-skeleton",{attrs:{size:"is-large",active:!t.ip.ip,width:"150",height:"32"}})],1)])],1)])])}),[],!1,null,null,null).exports,v=r(17),f=(r(24),r(4));r(47),r(103),r(104);function y(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,r)}return e}var _={props:{note:{type:String,required:!0},withdrawType:{type:String,required:!0}},data:function(){return{message:""}},computed:function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?y(Object(source),!0).forEach((function(e){Object(n.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):y(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({},Object(o.e)("mixer",["notes","errors"])),watch:{notes:function(t){t[this.note]&&(this.$store.dispatch("loading/disable"),this.message=this.$t("yourZkSnarkProofHasBeenSuccesfullyGenerated"))},errors:{handler:function(t){this.$store.dispatch("loading/disable"),this.$parent.close()},deep:!0}},mounted:function(){this.$store.dispatch("loading/enable",{message:this.$t("generatingProof")})},methods:{_sendWithdraw:function(){var t=this;return Object(f.a)(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.$store.dispatch("loading/enable",{message:t.$t("preparingTransactionData")}),r="wallet"===t.withdrawType?"mixer/withdraw":"relayer/relayTornadoWithdraw",e.prev=2,e.next=5,t.$store.dispatch(r,{note:t.note});case 5:t.$root.$emit("resetWithdraw"),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(2),console.error(e.t0),t.$store.dispatch("notice/addNoticeWithInterval",{notice:{untranslatedTitle:e.t0.message,type:"danger"},interval:3e3});case 12:return e.prev=12,t.$store.dispatch("loading/disable"),t.$parent.close(),e.finish(12);case 16:case"end":return e.stop()}}),e,null,[[2,8,12,16]])})))()}}},w=Object(h.a)(_,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"modal-card box box-modal"},[r("header",{staticClass:"box-modal-header is-spaced"},[r("div",{staticClass:"box-modal-title"},[t._v(t._s(t.$t("withdrawalConfirmation")))]),t._v(" "),r("button",{staticClass:"delete",attrs:{type:"button"},on:{click:function(e){return t.$emit("close")}}})]),t._v(" "),r("div",{staticClass:"note"},[t._v("\n    "+t._s(t.message)+"\n  ")]),t._v(" "),r("b-button",{attrs:{type:"is-primary is-fullwidth"},on:{click:t._sendWithdraw}},[t._v("\n    "+t._s(t.$t("confirm"))+"\n  ")])],1)}),[],!1,null,null,null).exports,x=r(1104),O=r(124),C=r(1108);function $(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,r)}return e}function j(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?$(Object(source),!0).forEach((function(e){Object(n.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):$(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var k=r(8),S=k.toChecksumAddress,T=k.isHexStrict,P=k.isAddress,D={components:{LinkIcon:O.e,SettingsIcon:O.f,WithdrawTotal:C.a},data:function(){return{withdrawAddress:"",withdrawNote:"",depositsPast:null,depositTxHash:null,depositTimestamp:null,isSpent:!1,error:{type:null,message:""},timePassed:""}},computed:j(j(j(j(j({},Object(o.e)("mixer",["note","errors","withdrawType","ethToReceive"])),Object(o.c)("mixer",["totalCalculations","selectedCurrency"])),Object(o.c)("txHashKeeper",["txExplorerUrl"])),Object(o.c)("metamask",["networkConfig","netId","isLoggedIn"])),{},{notEnoughDeposits:function(){return this.depositsPast<5},hasErrorNote:function(){var t=this.withdrawNote.split("-")[4];return"undefined"==typeof WebAssembly?{type:"is-warning",msg:this.$t("turnOnWasm")}:this.withdrawNote?!t||t.length<126||!T(t)?{type:"is-warning",msg:this.$t("noteIsInvalid")}:!!this.isSpent&&{type:"is-warning",msg:this.$t("noteHasBeenSpent")}:{type:"",msg:""}},isValidAddress:function(){return P(this.withdrawAddress)},notEnoughPassedTime:function(){return this.$moment().unix()-Number(this.depositTimestamp)<86400},hasWarning:function(){return this.depositsPast<5||this.notEnoughPassedTime},isWithdrawDisabled:function(){return!!this.error.type||this.hasErrorNote||"relayer"===this.withdrawType&&!this.selectedRelayer||!this.isValidAddress},selectedRelayer:function(){return this.$store.state.relayer.selectedRelayer.name},selectedMixer:function(){return this.$store.state.mixer.selectedMixer},selectedAmount:function(){return this.$store.state.mixer.selectedMixer.amount},tokens:function(){return this.networkConfig.tokens}}),watch:{errors:{handler:function(t){console.log("error",t),this.error={type:t.length?this.$t("error"):null,message:t[t.length-1]},this.error.message&&this.$store.dispatch("notice/addNoticeWithInterval",{notice:{untranslatedTitle:this.error.message,type:"warning"}})},deep:!0},withdrawNote:{handler:function(t){var e=this;return Object(f.a)(regeneratorRuntime.mark((function r(){var n,o,c,l,d,h,m,f,y,_,w,x,O;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(e.$store.dispatch("loading/enable",{message:e.$t("gettingTheNoteData")}),e.isSpent=!1,e.depositsPast=null,e.depositTxHash=null,e.depositTimestamp=null,e.hasErrorNote){r.next=31;break}if(n=e.withdrawNote.split("-"),o=Object(v.a)(n,5),c=o[0],l=o[1],d=o[2],h=o[3],m=o[4],"tornado"===c){r.next=11;break}return e.$store.dispatch("loading/disable"),e.withdrawNote="tornado-".concat(l,"-").concat(d,"-").concat(h,"-").concat(m),r.abrupt("return");case 11:return e.$store.commit("mixer/SET_WITHDRAW_NOTE",t),f=Number(h)!==Number(e.netId),e.$store.commit("mixer/SAVE_NET_ID_MISSMATCH",f),e.$store.commit("metamask/SET_NET_ID",h),f&&e.$store.dispatch("relayer/pickRandomRelayer",{},{root:!0}),r.next=18,e.$store.dispatch("mixer/loadDepositData",{withdrawNote:t});case 18:return y=r.sent,_=y.depositsPast,w=y.timestamp,x=y.txHash,(O=y.isSpent)&&e.$store.dispatch("notice/addNoticeWithInterval",{notice:{title:"noteWasAlreadySpent",type:"warning"},interval:5e3}),e.$store.commit("mixer/SET_SELECTED_MIXER",{currency:l,amount:Number(d)}),r.next=27,e.$store.dispatch("mixer/loadStatistic",{netId:h});case 27:e.depositsPast=_,e.depositTxHash=x,e.depositTimestamp=w,e.isSpent=O;case 31:e.$store.dispatch("loading/disable");case 32:case"end":return r.stop()}}),r)})))()}},"$i18n.locale":function(){this.timePastToRender()},depositTimestamp:function(){this.timePastToRender()}},mounted:function(){var t=this;this.$route.query.note&&(this.withdrawNote=this.$route.query.note),this.$root.$on("resetWithdraw",(function(){t.withdrawAddress="",t.withdrawNote=""}))},methods:{onWithdraw:function(){if(126===this.withdrawNote.split("-")[4].length)try{this.withdrawAddress=S(this.withdrawAddress),this.$store.dispatch("mixer/prepareWithdraw",{note:this.withdrawNote,recipient:this.withdrawAddress}),this.error.type=null,this.currentModal=this.$buefy.modal.open({parent:this,component:w,hasModalCard:!0,width:440,props:{note:this.withdrawNote,withdrawType:this.withdrawType}})}catch(t){this.error={type:this.$t("validationError"),message:this.$t("recipientAddressIsInvalid")},console.error("error",t)}else this.error={type:this.$t("validationError"),message:this.$t("noteIsInvalid")}},onSettings:function(){var t=this,e=this.ethToReceive,r=this.withdrawType,n=this.$store.state.relayer.selectedRelayer;this.$buefy.modal.open({parent:this,component:x.a,hasModalCard:!0,width:440,props:{total:this.totalCalculations,currency:this.selectedCurrency},onCancel:function(){t.cancelSettingsEditing({ethToReceive:e,withdrawType:r,relayer:n})},customClass:"is-pinned"})},cancelSettingsEditing:function(t){var e=t.ethToReceive,r=t.withdrawType,n=t.relayer;this.$store.dispatch("relayer/setupRelayer",n),this.$store.commit("mixer/SAVE_ETH_TO_RECEIVE",{ethToReceive:e}),this.$store.commit("mixer/SET_WITHDRAW_TYPE",{withdrawType:r})},timePastToRender:function(){this.timePassed=this.$moment.unix(this.depositTimestamp).fromNow(!0)},insertDonate:function(){this.withdrawAddress="0xDD4c48C0B24039969fC16D1cdF626eaB821d3384"}}},E=Object(h.a)(D,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("div",{staticClass:"field"},[r("div",{staticClass:"label-with-buttons"},[r("div",{staticClass:"label"},[t._v("\n        "+t._s(t.$t("note"))+"\n        "),r("b-tooltip",{attrs:{label:t.$t("noteTooltip"),size:"is-small",position:"is-right",multilined:""}},[r("button",{staticClass:"button is-primary has-icon"},[r("span",{staticClass:"icon icon-info"})])])],1),t._v(" "),r("a",{directives:[{name:"show",rawName:"v-show",value:!t.hasErrorNote&&t.depositTxHash,expression:"!hasErrorNote && depositTxHash"}],staticClass:"button is-icon",attrs:{href:t.txExplorerUrl(t.depositTxHash),target:"_blank"}},[r("b-tooltip",{attrs:{label:t.$t("depositTransactionOnEtherscan"),size:"is-small",position:"is-left",multilined:""}},[r("LinkIcon")],1)],1),t._v(" "),r("button",{directives:[{name:"show",rawName:"v-show",value:!t.hasErrorNote,expression:"!hasErrorNote"}],staticClass:"button is-icon",on:{click:t.onSettings}},[r("b-tooltip",{attrs:{label:t.$t("withdrawalSettings"),size:"is-small",position:"is-right",multilined:""}},[r("SettingsIcon")],1)],1)]),t._v(" "),r("b-input",{attrs:{placeholder:t.$t("pleaseEnterYourNote"),"custom-class":t.hasErrorNote?t.hasErrorNote.type:"is-primary"},model:{value:t.withdrawNote,callback:function(e){t.withdrawNote=e},expression:"withdrawNote"}}),t._v(" "),t.hasErrorNote?r("div",{staticClass:"help",class:t.hasErrorNote.type},[r("p",{domProps:{innerHTML:t._s(t.hasErrorNote.msg)}})]):t._e()],1),t._v(" "),!t.hasErrorNote&&t.depositTxHash?r("div",{staticClass:"field field-withdraw"},[r("div",{staticClass:"withdraw-data"},[r("div",{staticClass:"withdraw-data-item"},[t._v("\n        "+t._s(t.$t("amount"))+" "),r("span",[t._v(t._s(t.selectedAmount)+" "+t._s(t.selectedCurrency))])]),t._v(" "),r("div",{staticClass:"withdraw-data-item"},[t._v("\n        "+t._s(t.$t("timePassed"))+"\n        "),r("b-tooltip",{class:{"has-low-anonymity":t.notEnoughPassedTime},attrs:{active:t.notEnoughPassedTime,label:t.$t("timePassedTooltip"),position:"is-left",multilined:"",size:"is-large"}},[r("span",[t._v(t._s(t.timePassed))])])],1),t._v(" "),r("div",{staticClass:"withdraw-data-item"},[t._v("\n        "+t._s(t.$t("subsequentDeposits"))+"\n        "),r("b-tooltip",{class:{"has-low-anonymity":t.notEnoughDeposits},attrs:{active:t.notEnoughDeposits,label:t.$t("subsequentDepositsTooltip"),position:"is-left",multilined:"",size:"is-large"}},[r("span",[t._v(t._s(this.$tc("userDeposit",t.depositsPast)))])])],1)])]):t._e(),t._v(" "),r("fieldset",[r("div",{staticClass:"field withdraw-address"},[r("div",{staticClass:"label-with-buttons"},[r("div",{staticClass:"label"},[r("span",{staticClass:"name"},[t._v("\n            "+t._s(t.$t("recipientAddress"))+"\n          ")])]),t._v(" "),r("button",{staticClass:"button is-primary-text",on:{click:t.insertDonate}},[t._v("\n          "+t._s(t.$t("donate"))+"\n        ")])]),t._v(" "),r("b-input",{attrs:{placeholder:t.$t("pleasePasteAddressHere"),size:t.withdrawAddress?t.isValidAddress?"is-primary":"is-warning":""},model:{value:t.withdrawAddress,callback:function(e){t.withdrawAddress=e},expression:"withdrawAddress"}}),t._v(" "),r("p",{staticClass:"help"},[r("span",{staticClass:"has-text-warning"},[t._v(t._s(t.error.type))]),t._v(" "+t._s(t.error.message)+"\n      ")])],1),t._v(" "),r("WithdrawTotal",{directives:[{name:"show",rawName:"v-show",value:t.isValidAddress&&!t.isWithdrawDisabled,expression:"isValidAddress && !isWithdrawDisabled"}],attrs:{total:t.totalCalculations,currency:t.selectedCurrency}}),t._v(" "),r("b-button",{attrs:{type:"is-primary is-fullwidth",disabled:t.isWithdrawDisabled},on:{click:t.onWithdraw}},[t._v("\n      "+t._s(t.$t("withdrawButton"))+"\n    ")])],1)])}),[],!1,null,null,null).exports;r(132);function A(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,r)}return e}function N(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?A(Object(source),!0).forEach((function(e){Object(n.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):A(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var I={data:function(){return{success:!1,isApproveBtnAlreadyPressed:!1}},computed:N(N(N(N(N({},Object(o.e)("mixer",["selectedMixer"])),Object(o.e)("token",["allowance"])),Object(o.c)("txHashKeeper",["txExplorerUrl"])),Object(o.c)("token",["fromDecimals"])),{},{approvalAmount:{get:function(){return this.$store.state.token.approvalAmount},set:function(t){this.$store.commit("token/SET_APPROVAL_AMOUNT",{approvalAmount:t})}}}),methods:N(N({},Object(o.b)("token",["approve"])),{},{_approve:function(){var t=this;return Object(f.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.isApproveBtnAlreadyPressed=!0,t.$store.dispatch("loading/enable",{message:t.$t("preparingTransactionData")}),e.prev=2,e.next=5,t.approve();case 5:return e.next=7,t.$store.dispatch("token/fetchTokenAllowance");case 7:t.$store.dispatch("notice/addNoticeWithInterval",{notice:{title:"transactionWasSuccessfullySent",type:"success"},interval:3e3}),t.success=!0,e.next=16;break;case 11:e.prev=11,e.t0=e.catch(2),console.error(e.t0),t.$store.dispatch("notice/addNoticeWithInterval",{notice:{untranslatedTitle:e.t0.message,type:"danger"},interval:5e3}),t.success=!1;case 16:t.isApproveBtnAlreadyPressed=!1,t.$store.dispatch("loading/disable"),t.$parent.close();case 19:case"end":return e.stop()}}),e,null,[[2,11]])})))()}})},M=Object(h.a)(I,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"modal-card box box-modal"},[r("header",{staticClass:"box-modal-header is-spaced"},[r("div",{staticClass:"box-modal-title"},[t._v(t._s(t.$t("approvalIsRequired")))]),t._v(" "),r("button",{staticClass:"delete",attrs:{type:"button"},on:{click:function(e){return t.$emit("close")}}})]),t._v(" "),r("div",{staticClass:"note"},[t._v("\n    "+t._s(t.$t("inOrderToUse",{currency:t.selectedMixer.currency.toUpperCase()}))+"\n  ")]),t._v(" "),r("b-field",{staticClass:"withdraw-radio"},[r("b-radio",{staticClass:"radio-relayer",attrs:{"native-value":t.selectedMixer.amount.toString()},model:{value:t.approvalAmount,callback:function(e){t.approvalAmount=e},expression:"approvalAmount"}},[t._v("\n      "+t._s(t.selectedMixer.amount)+" "+t._s(t.selectedMixer.currency.toUpperCase())+"\n    ")]),t._v(" "),r("b-radio",{staticClass:"radio-metamask",attrs:{"native-value":"unlimited"},model:{value:t.approvalAmount,callback:function(e){t.approvalAmount=e},expression:"approvalAmount"}},[t._v("\n      "+t._s(t.$t("unlimited"))+"\n      "),r("b-tooltip",{attrs:{label:t.$t("unlimitedTooltip"),position:"is-top",multilined:""}},[r("button",{staticClass:"button is-primary has-icon"},[r("span",{staticClass:"icon icon-info"})])])],1)],1),t._v(" "),r("b-button",{attrs:{type:"is-primary is-fullwidth",disabled:t.isApproveBtnAlreadyPressed},on:{click:t._approve}},[t._v("\n    "+t._s(t.$t("enable"))+"\n  ")])],1)}),[],!1,null,null,null).exports;function R(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,r)}return e}function H(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?R(Object(source),!0).forEach((function(e){Object(n.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):R(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var W={computed:H(H(H(H({},Object(o.e)("mixer",["selectedMixer"])),Object(o.e)("token",["balance"])),Object(o.c)("token",["toDecimals"])),Object(o.e)("metamask",["ethBalance"])),methods:{close:function(){this.$parent.close()}}},B=Object(h.a)(W,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"modal-card box box-modal"},[r("header",{staticClass:"box-modal-header is-spaced"},[r("div",{staticClass:"box-modal-title"},[t._v(t._s(t.$t("insufficientBalance")))]),t._v(" "),r("button",{staticClass:"delete",attrs:{type:"button"},on:{click:function(e){return t.$emit("close")}}})]),t._v(" "),r("div",{staticClass:"note"},[t._v("\n    "+t._s(t.$t("youDontHaveEnoughTokens",{currency:t.selectedMixer.currency.toUpperCase(),balance:"eth"===t.selectedMixer.currency?t.toDecimals(t.ethBalance):t.toDecimals(t.balance)}))+"\n  ")]),t._v(" "),r("b-button",{attrs:{type:"is-primary is-fullwidth"},on:{click:t.close}},[t._v(t._s(t.$t("close")))])],1)}),[],!1,null,null,null).exports;function z(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,r)}return e}function F(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?z(Object(source),!0).forEach((function(e){Object(n.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):z(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var U={data:function(){return{isBackuped:!1,tooltipCopy:this.$t("clickToCopy")}},computed:F(F({},Object(o.e)("mixer",["note","prefix"])),{},{isIPFS:function(){return this.$isLoadedFromIPFS()}}),methods:F(F({},Object(o.b)("mixer",["sendDeposit"])),{},{onCopy:function(){var t=this;this.tooltipCopy=this.$t("copied"),setTimeout((function(){t.tooltipCopy=t.$t("clickToCopy")}),1500)},_sendDeposit:function(){var t=this;return Object(f.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.$store.dispatch("loading/enable",{message:t.$t("preparingTransactionData")}),e.next=3,t.sendDeposit();case 3:t.$store.dispatch("loading/disable"),t.$parent.close();case 5:case"end":return e.stop()}}),e)})))()}})},L=Object(h.a)(U,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"modal-card box box-modal"},[r("header",{staticClass:"box-modal-header is-spaced"},[r("div",{staticClass:"box-modal-title"},[t._v(t._s(t.$t("yourNote")))]),t._v(" "),r("button",{staticClass:"delete",attrs:{type:"button"},on:{click:function(e){return t.$emit("close")}}})]),t._v(" "),r("div",{staticClass:"note"},[t._v(t._s(t.$t("pleaseBackupYourNote")))]),t._v(" "),r("div",{staticClass:"znote"},[t._v("\n    "+t._s(t.prefix)+"-"+t._s(t.note)+"\n    "),r("b-tooltip",{attrs:{label:t.tooltipCopy,position:"is-top"}},[r("button",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:t.prefix+"-"+t.note,expression:"`${prefix}-${note}`",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"}],staticClass:"button is-primary has-icon"},[r("span",{staticClass:"icon icon-copy"})])])],1),t._v(" "),r("b-checkbox",{model:{value:t.isBackuped,callback:function(e){t.isBackuped=e},expression:"isBackuped"}},[t._v(t._s(t.$t("iBackedUpTheNote")))]),t._v(" "),t.isBackuped&&t.isIPFS?r("div",{staticClass:"notice is-warning"},[r("div",{staticClass:"notice__p"},[t._v(t._s(t.$t("yourNoteWontBeSaved")))])]):t._e(),t._v(" "),r("b-button",{attrs:{type:"is-primary is-fullwidth",disabled:!t.isBackuped},on:{click:t._sendDeposit}},[t._v("\n    "+t._s(t.$t("sendDeposit"))+"\n  ")])],1)}),[],!1,null,null,null).exports,K=r(281);function V(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,r)}return e}function J(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?V(Object(source),!0).forEach((function(e){Object(n.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):V(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var Y={data:function(){return{currentStep:0,amounts:[],isDepositBtnClicked:!1,isDepositModalOpened:!1}},computed:J(J(J(J({},Object(o.c)("token",["isSufficientAllowance","isSufficientBalance"])),Object(o.c)("metamask",["networkConfig","netId","isLoggedIn"])),Object(o.c)("mixer",["selectedCurrency"])),{},{selectedAmount:{get:function(){return this.$store.state.mixer.selectedMixer.amount},set:function(t){var e=this.selectedToken,r=t;this.$store.commit("mixer/SET_SELECTED_MIXER",{currency:e,amount:r}),this.$store.dispatch("mixer/loadStatistic",{})}},tokens:function(){return this.networkConfig.tokens},selectedToken:{get:function(){return this.$store.state.mixer.selectedMixer.currency},set:function(t){console.log("selectedToken",t),this.currentStep=0;var e=t,r=this.sortAmounts(e)[0].amount;this.$store.commit("mixer/SET_SELECTED_MIXER",{currency:e,amount:r}),console.log("set selectedToken",e,r),this.$store.dispatch("mixer/loadStatistic",{})}}}),watch:{netId:{handler:function(t){this.sortAmounts()}}},beforeMount:function(){this.sortAmounts()},methods:{shortenAmount:function(t){return t%1e3==0&&(t="".concat(t/1e3,"k")),"".concat(t," ").concat(this.tokens[this.selectedToken].symbol)},onLogIn:function(){this.$buefy.modal.open({parent:this,component:K.a,hasModalCard:!0,width:440})},changeAmount:function(i){this.selectedAmount=Number(this.amounts[i].amount)},sortAmounts:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.selectedToken;return this.amounts=Object.entries(this.tokens[t].mixerAddress).sort((function(a,b){return a[0]-b[0]})).map((function(t){var e=Object(v.a)(t,2),r=e[0],address=e[1];return{amount:Number(r),address:address}})),this.amounts},openDepositModal:function(){var t=this;this.$store.dispatch("mixer/prepareDeposit",{prefix:"tornado-".concat(this.selectedToken,"-").concat(this.selectedAmount,"-").concat(this.netId)}),this.$buefy.modal.open({parent:this,component:L,hasModalCard:!0,width:440,customClass:"is-pinned"}).$on("close",(function(){t.isDepositModalOpened=!1}))},onDeposit:function(){var t=this;return Object(f.a)(regeneratorRuntime.mark((function e(){var r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=function(){console.log("once approvalBoxClosed",t.isSufficientAllowance),t.isSufficientAllowance&&(t.isDepositModalOpened||(t.isDepositModalOpened=!0,t.openDepositModal()))},t.isDepositBtnClicked=!0,e.next=4,t.$store.dispatch("token/fetchTokenAllowance",{},{root:!0});case 4:return e.next=6,t.$store.dispatch("token/fetchTokenBalance",{},{root:!0});case 6:t.isSufficientBalance?t.isSufficientAllowance||"eth"===t.selectedToken?t.openDepositModal():(n=t,t.$buefy.modal.open({parent:n,component:M,hasModalCard:!0,width:440}).$on("close",r)):t.$buefy.modal.open({parent:t,component:B,hasModalCard:!0,width:440}),t.isDepositBtnClicked=!1;case 8:case"end":return e.stop()}}),e)})))()}}},X=Object(h.a)(Y,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("fieldset",[r("b-field",{attrs:{label:t.$t("token")}},[r("b-dropdown",{attrs:{expanded:"","aria-role":"list"},model:{value:t.selectedToken,callback:function(e){t.selectedToken=e},expression:"selectedToken"}},[r("div",{staticClass:"control",attrs:{slot:"trigger"},slot:"trigger"},[r("div",{staticClass:"input"},[r("span",[t._v(t._s(t.selectedCurrency))])])]),t._v(" "),t._l(t.tokens,(function(e,n){return r("b-dropdown-item",{key:n,attrs:{"aria-role":"listitem",value:n}},[t._v("\n          "+t._s(e.symbol)+"\n        ")])}))],2)],1),t._v(" "),r("b-field",[r("template",{slot:"label"},[t._v("\n        "+t._s(t.$t("amount"))+"\n        "),r("b-tooltip",{attrs:{label:t.$t("amountTooltip"),size:"is-small",position:"is-right",multilined:""}},[r("button",{staticClass:"button is-primary has-icon"},[r("span",{staticClass:"icon icon-info"})])])],1),t._v(" "),r("b-steps",{attrs:{size:"is-small","has-navigation":!1,"mobile-mode":null},on:{input:t.changeAmount},model:{value:t.currentStep,callback:function(e){t.currentStep=e},expression:"currentStep"}},[t._l(t.amounts,(function(e,n){var o=e.amount,address=e.address;return[r("b-step-item",{key:n,attrs:{label:t.shortenAmount(o),clickable:""!==address}})]}))],2)],2)],1),t._v(" "),t.isLoggedIn?r("b-button",{attrs:{type:"is-primary is-fullwidth",disabled:t.isDepositBtnClicked},on:{click:t.onDeposit}},[t._v("\n    "+t._s(t.$t("depositButton"))+"\n  ")]):r("b-button",{attrs:{type:"is-primary is-fullwidth"},nativeOn:{click:function(e){return t.onLogIn(e)}}},[t._v("\n    "+t._s(t.$t("connect"))+"\n  ")])],1)}),[],!1,null,null,null).exports,G=(r(60),r(1117),r(279)),Q=r(57);function Z(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,r)}return e}function tt(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?Z(Object(source),!0).forEach((function(e){Object(n.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):Z(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var et={components:{NumberFormat:G.a},props:{tx:{type:Object,required:!0}},data:function(){return{tooltipShareUrl:this.$t("copyNote"),time:"",isSpent:!1,timer:null}},computed:tt(tt(tt(tt(tt({},Object(o.c)("txHashKeeper",["txExplorerUrl"])),Object(o.c)("metamask",["networkConfig"])),Object(o.c)("token",["toDecimals"])),Object(o.e)("mixer",["selectedMixer","statistic"])),{},{prefix:function(){var t=this.tx.prefix||"";return t=t.split("-"),{currency:t[1],amount:t[2]}},isClaimedTx:function(){return!this.tx.isClaimed||!this.tx.isSpent},amount:function(){return"100000000000000000"===this.tx.amount?this.toDecimals(this.tx.amount,18):this.tx.amount},currency:function(){var t=this.prefix.currency;return t||this.tx.currency},mixingPower:function(){if(!this.tx.index)return"-";if("v1"===this.tx.index)return this.$t("v1Deposit");var t=this.prefix,e=t.currency,r=t.amount,n=this.statistic[e][r].nextDepositIndex;if(this.tx.status!==Q.default.waitingForReciept&&n){if(this.tx.status===Q.default.fail)return"-";var o=this.statistic[e][r].nextDepositIndex-this.tx.index-1;return this.depositsPastToRender(o)}return"loading"},baseURL:function(){return window.location.origin},status:function(){return this.isWaiting?this.$t("waitingForReceipt"):this.isFailed?this.$t("failed"):this.tx.isSpent?this.$t("spent"):this.$t("deposited")},isWaiting:function(){return this.tx.status===Q.default.waitingForReciept},isFailed:function(){return this.tx.status===Q.default.fail},tooltipClaimed:function(){return this.tx.blockNumber?this.tx.isSpent?this.tx.isClaimed?this.$t("isClaimed"):this.$t("goodForMining"):this.$t("noteHasNotSpent"):this.$t("noteTooOld")}}),mounted:function(){this.update()},beforeDestroy:function(){clearTimeout(this.timer)},methods:{update:function(){var t=this;this.updateTime(),this.timer=setTimeout((function(){t.update()}),1e4)},redirectToClaim:function(){this.$store.dispatch("farmer/saveRedirectNote",{note:"".concat(this.tx.prefix,"-").concat(this.tx.note)},{root:!0}),this.$router.push("/mining")},onCopyLink:function(){var t=this;this.tooltipShareUrl=this.$t("copied"),setTimeout((function(){t.tooltipShareUrl=t.$t("copyNote")}),1500)},onClose:function(){var t=this;this.$buefy.dialog.confirm({title:this.$t("removeFromCache"),type:"is-primary is-outlined",message:this.$t("pleaseMakeSureYouHaveBackedUpYourNote"),cancelText:this.$t("cancelButton"),confirmText:this.$t("remove"),onConfirm:function(){t.$store.dispatch("notice/addNoticeWithInterval",{notice:{title:"noteHasBeenDeleted",type:"info"},interval:2e3}),t.$store.commit("txHashKeeper/DELETE_TX",{txHash:t.tx.txHash})}})},updateTime:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.tx.timestamp;this.time=this.$moment.unix(t).fromNow()},depositsPastToRender:function(t){return t<0?"loading":this.$tc("userDeposit",t)}}},st=Object(h.a)(et,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"box box-tx",class:{"is-waiting":t.isWaiting,"is-danger":t.isFailed,"is-spent":t.tx.isSpent}},[r("div",{staticClass:"columns is-vcentered"},[r("div",{staticClass:"column is-time",attrs:{"data-label":t.$t("timePassed")}},[t._v(t._s(t.time))]),t._v(" "),r("div",{staticClass:"column is-amount",attrs:{"data-label":t.$t("amount")}},[t._v("\n      "+t._s(t.amount)+"\n      "+t._s(t.currency.toUpperCase())+"\n    ")]),t._v(" "),r("div",{staticClass:"column is-deposit",attrs:{"data-label":t.$t("subsequentDeposits")}},["loading"===t.mixingPower?r("b-skeleton",{attrs:{width:"80"}}):[t._v("\n        "+t._s(t.mixingPower)+"\n      ")]],2),t._v(" "),r("div",{staticClass:"column is-hash",attrs:{"data-label":t.$t("txHash")}},[r("div",{staticClass:"details"},[r("p",{staticClass:"detail"},[r("a",{staticClass:"detail-description",attrs:{href:t.txExplorerUrl(t.tx.txHash),target:"_blank"}},[t._v("\n            "+t._s(t.tx.txHash)+"\n          ")])])])]),t._v(" "),r("div",{staticClass:"column is-status",attrs:{"data-label":t.$t("status")}},[t._v(t._s(t.status))]),t._v(" "),t.isFailed?t._e():r("div",{staticClass:"column is-reward",attrs:{"data-label":t.$t("rewards")}},[r("span",{staticClass:"ap"},[r("NumberFormat",{attrs:{value:t.tx.reward}}),t._v(" AP")],1),t._v(" "),r("b-tooltip",{attrs:{active:!t.isWaiting,label:t.tooltipClaimed,position:"is-left",multilined:""}},[t.tx.blockNumber&&t.tx.isSpent&&!t.tx.isClaimed?r("b-button",{attrs:{size:"is-small",type:"is-primary","icon-right":"tool"},nativeOn:{click:function(e){return t.redirectToClaim(e)}}}):r("b-button",{attrs:{disabled:"",size:"is-small",type:"is-dark","icon-right":"tool"},nativeOn:{click:function(e){return t.redirectToClaim(e)}}})],1)],1),t._v(" "),t.isFailed?t._e():r("div",{staticClass:"column column-buttons"},[r("b-tooltip",{attrs:{active:!!t.tx.note,label:t.tooltipShareUrl,position:"is-left"}},[r("b-button",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:t.tx.prefix+"-"+t.tx.note,expression:"`${tx.prefix}-${tx.note}`",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopyLink,expression:"onCopyLink",arg:"success"}],attrs:{type:"is-primary",size:"is-small",disabled:!t.tx.note,"icon-left":"copy"}},[t._v("\n          "+t._s(t.$t("note"))+"\n        ")])],1),t._v(" "),r("b-button",{attrs:{type:"is-dark",size:"is-small","icon-right":"remove"},on:{click:t.onClose}})],1)])])}),[],!1,null,null,null).exports;function it(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,r)}return e}function nt(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?it(Object(source),!0).forEach((function(e){Object(n.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):it(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var ot={props:{job:{type:Object,required:!0,timer:null}},data:function(){return{time:""}},computed:nt(nt(nt({},Object(o.c)("txHashKeeper",["txExplorerUrl"])),Object(o.c)("metamask",["netId"])),{},{isFailed:function(){return"FAILED"===this.job.status},status:function(){switch(this.job.status){case"ACCEPTED":return this.$t("accepted");case"SENT":return this.$t("sent");case"MINED":return this.$t("mined");case"CONFIRMED":return this.$t("confirmed");case"FAILED":return this.$t("failed");case"RESUBMITTED":return this.$t("resubmitted");case"QUEUED":return this.$t("queued");default:return this.job.status}}}),mounted:function(){this.update()},beforeDestroy:function(){clearTimeout(this.timer)},methods:{update:function(){var t=this;this.updateTime(),this.timer=setTimeout((function(){t.update()}),1e4)},onDelete:function(){this.$store.commit("relayer/DELETE_JOB",{id:this.job.id,type:"tornado",netId:this.netId})},updateTime:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.job.timestamp;this.time=this.$moment.unix(t).fromNow()}}};function at(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,r)}return e}function ct(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?at(Object(source),!0).forEach((function(e){Object(n.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):at(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var lt={components:{Tx:st,Job:Object(h.a)(ot,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"box box-tx is-waiting",class:{"is-danger":t.isFailed}},[r("div",{staticClass:"columns is-vcentered"},[r("div",{staticClass:"column is-time",attrs:{"data-label":t.$t("timePassed")}},[t._v(t._s(t.time))]),t._v(" "),r("div",{staticClass:"column is-amount",attrs:{"data-label":t.$t("amount")}},[t._v("\n      "+t._s(t.job.amount)+"\n      "+t._s(t.job.currency.toUpperCase())+"\n    ")]),t._v(" "),r("div",{staticClass:"column is-deposit",attrs:{"data-label":t.$t("subsequentDeposits")}},[r("b-skeleton",{attrs:{width:"80"}})],1),t._v(" "),r("div",{staticClass:"column is-hash",attrs:{"data-label":t.$t("txHash")}},[t.job.txHash||"FAILED"===t.job.status?r("div",{staticClass:"details"},[r("p",{staticClass:"detail"},[r("a",{staticClass:"detail-description",attrs:{href:t.txExplorerUrl(t.job.txHash),target:"_blank"}},[t._v("\n            "+t._s(t.job.txHash)+"\n          ")])])]):r("b-skeleton")],1),t._v(" "),r("div",{staticClass:"column is-status",attrs:{"data-label":t.$t("status")}},[t.job.status?[r("div",{staticClass:"status-with-loading"},[t._v("\n          "+t._s(t.status)+"\n          "),r("b-icon",{attrs:{icon:"loading",size:"is-small"}})],1)]:r("b-skeleton",{attrs:{width:"60"}})],2),t._v(" "),r("div",{staticClass:"column is-reward"},[t._v("-")]),t._v(" "),r("div",{staticClass:"column column-buttons"},[r("b-button",{attrs:{type:"is-primary",size:"is-small","icon-left":"copy",disabled:""}},[t._v("\n        "+t._s(t.$t("note"))+"\n      ")]),t._v(" "),r("b-button",{attrs:{type:"is-dark",size:"is-small","icon-right":"remove",disabled:!t.isFailed},on:{click:t.onDelete}})],1)])])}),[],!1,null,null,null).exports},data:function(){return{filters:{currency:"",ifAfter24hrs:!1,isSpent:!1},currentSort:"timestamp",isAsc:!1,mobileSort:"timestamp"}},computed:ct(ct(ct(ct(ct({},Object(o.c)("metamask",["networkConfig"])),Object(o.c)("txHashKeeper",["txs","txExplorerUrl"])),Object(o.c)("relayer",["jobs"])),Object(o.e)("mixer",["statistic"])),{},{tokens:function(){return this.networkConfig.tokens},activeTokensFilters:function(){var t=new Set;return this.txs.forEach((function(e){t.add(e.currency)})),t},filteredTxs:function(){var t=this;return this.txs.filter((function(e){var r=[];return""!==t.filters.currency&&r.push(t.filters.currency===e.currency),t.filters.ifAfter24hrs&&r.push(t.$moment().unix()-Number(e.timestamp)>86400),!1!==t.filters.isSpent&&r.push(t.filters.isSpent===e.isSpent),r.every(Boolean)})).sort((function(a,b){if("deposits"===t.currentSort){var e=t.getDepositsPast(a),r=t.getDepositsPast(b);return t.isAsc?e-r:r-e}return t.isAsc?a[t.currentSort]-b[t.currentSort]:b[t.currentSort]-a[t.currentSort]}))}}),watch:{mobileSort:function(t){this.currentSort!==t&&this.setSort(t)},txs:function(t,e){t.length>0&&t.length!==e.length&&(this.txsWithReward(),this.checkPendingTransaction())},currentSort:function(t){this.mobileSort=t}},methods:ct(ct({},Object(o.b)("txHashKeeper",["txsWithReward","checkPendingTransaction"])),{},{setFilter:function(filter,t){this.filters[filter]=this.filters[filter]===t?"":t},setSort:function(t){this.isAsc=t!==this.currentSort||!this.isAsc,this.currentSort=t},getDepositsPast:function(t){var e=t.prefix.split("-"),r=Object(v.a)(e,3),n=r[1],o=r[2];return this.statistic[n][o].nextDepositIndex-t.index-1},setSpent:function(t){this.filters.isSpent=this.filters.isSpent!==t&&t}})},ut=Object(h.a)(lt,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{directives:[{name:"show",rawName:"v-show",value:Object.keys(t.txs).length>0||Object.keys(t.jobs("tornado")).length>0,expression:"Object.keys(txs).length > 0 || Object.keys(jobs('tornado')).length > 0"}],staticClass:"txs"},[r("div",{staticClass:"tx-filters buttons"},[r("div",{staticClass:"tx-filters-title"},[t._v(t._s(t.$t("filterBy")))]),t._v(" "),t._l(t.tokens,(function(e,n){return r("b-button",{key:n,class:{"is-hovered":t.filters.currency===n},attrs:{type:"is-primary",size:"is-small",outlined:"",disabled:!t.activeTokensFilters.has(n)&&t.filters.currency!==n},on:{click:function(e){return t.setFilter("currency",n)}}},[t._v("\n      "+t._s(e.symbol)+"\n    ")])})),t._v(" "),r("div",{staticClass:"break"}),t._v(" "),r("b-button",{class:{"is-hovered":t.filters.ifAfter24hrs},attrs:{type:"is-primary",size:"is-small",outlined:""},on:{click:function(e){t.filters.ifAfter24hrs=!t.filters.ifAfter24hrs}}},[t._v("\n      "+t._s(t.$t("twentyFourHoursAfterDeposit"))+"\n    ")]),t._v(" "),r("div",{staticClass:"break"}),t._v(" "),r("b-field",[r("p",{staticClass:"control"},[r("b-button",{class:{"is-hovered":!0===t.filters.isSpent},attrs:{type:"is-primary",size:"is-small",outlined:""},on:{click:function(e){return t.setSpent(!0)}}},[t._v("\n          "+t._s(t.$t("spent"))+"\n        ")])],1),t._v(" "),r("p",{staticClass:"control"},[r("b-button",{class:{"is-hovered":void 0===t.filters.isSpent},attrs:{type:"is-primary",size:"is-small",outlined:""},on:{click:function(e){return t.setSpent(void 0)}}},[t._v("\n          "+t._s(t.$t("unspent"))+"\n        ")])],1)])],2),t._v(" "),r("div",{staticClass:"tx-head"},[r("div",{staticClass:"columns"},[r("div",{staticClass:"column is-time is-sortable",on:{click:function(e){return t.setSort("timestamp")}}},[t._v("\n        "+t._s(t.$t("timePassed"))+"\n\n        "),r("span",{directives:[{name:"show",rawName:"v-show",value:"timestamp"===t.currentSort,expression:"currentSort === 'timestamp'"}],staticClass:"icon icon-chevron-up",class:{"is-desc":!t.isAsc}})]),t._v(" "),r("div",{staticClass:"column is-amount is-sortable",on:{click:function(e){return t.setSort("amount")}}},[t._v("\n        "+t._s(t.$t("amount"))+"\n        "),r("span",{directives:[{name:"show",rawName:"v-show",value:"amount"===t.currentSort,expression:"currentSort === 'amount'"}],staticClass:"icon icon-chevron-up",class:{"is-desc":!t.isAsc}})]),t._v(" "),r("div",{staticClass:"column is-deposit is-sortable",on:{click:function(e){return t.setSort("deposits")}}},[t._v("\n        "+t._s(t.$t("subsequentDeposits"))+"\n        "),r("span",{directives:[{name:"show",rawName:"v-show",value:"deposits"===t.currentSort,expression:"currentSort === 'deposits'"}],staticClass:"icon icon-chevron-up",class:{"is-desc":!t.isAsc}})]),t._v(" "),r("div",{staticClass:"column is-hash"},[t._v(t._s(t.$t("txHash")))]),t._v(" "),r("div",{staticClass:"column is-status"},[t._v(t._s(t.$t("status")))]),t._v(" "),r("div",{staticClass:"column is-reward is-sortable",on:{click:function(e){return t.setSort("reward")}}},[t._v("\n        "+t._s(t.$t("rewards"))+"\n        "),r("span",{directives:[{name:"show",rawName:"v-show",value:"reward"===t.currentSort,expression:"currentSort === 'reward'"}],staticClass:"icon icon-chevron-up",class:{"is-desc":!t.isAsc}})]),t._v(" "),r("div",{staticClass:"column column-buttons"})])]),t._v(" "),r("div",{staticClass:"tx-head-mobile field is-grouped"},[r("div",{staticClass:"control is-expanded"},[r("b-dropdown",{attrs:{expanded:"","aria-role":"list"},model:{value:t.mobileSort,callback:function(e){t.mobileSort=e},expression:"mobileSort"}},[r("div",{staticClass:"control",attrs:{slot:"trigger"},slot:"trigger"},[r("div",{staticClass:"input"},[r("span",[t._v(t._s("timestamp"===t.mobileSort?t.$t("timePassed"):"amount"===t.mobileSort?t.$t("amount"):t.$t("subsequentDeposits")))])])]),t._v(" "),r("b-dropdown-item",{attrs:{value:"timestamp","aria-role":"listitem"}},[t._v("\n          "+t._s(t.$t("timePassed"))+"\n        ")]),t._v(" "),r("b-dropdown-item",{attrs:{value:"amount","aria-role":"listitem"}},[t._v(t._s(t.$t("amount")))]),t._v(" "),r("b-dropdown-item",{attrs:{value:"reward","aria-role":"listitem"}},[t._v(t._s(t.$t("reward")))]),t._v(" "),r("b-dropdown-item",{attrs:{value:"deposits","aria-role":"listitem"}},[t._v("\n          "+t._s(t.$t("subsequentDeposits"))+"\n        ")])],1)],1),t._v(" "),r("div",{staticClass:"control"},[r("button",{staticClass:"button is-primary",on:{click:function(e){return t.setSort(t.mobileSort)}}},[r("span",{directives:[{name:"show",rawName:"v-show",value:t.currentSort===t.mobileSort,expression:"currentSort === mobileSort"}],staticClass:"icon icon-arrow-up",class:{"is-desc":!t.isAsc}})])])]),t._v(" "),t._l(t.jobs("tornado"),(function(t){return r("Job",{key:t.id,attrs:{job:t}})})),t._v(" "),t._l(t.filteredTxs,(function(t){return r("Tx",{key:t.txHash,attrs:{tx:t}})})),t._v(" "),r("div",{directives:[{name:"show",rawName:"v-show",value:0===t.filteredTxs.length&&0===t.jobs("tornado").length,expression:"filteredTxs.length === 0 && jobs('tornado').length === 0"}],staticClass:"box box-tx is-white"},[r("div",{staticClass:"columns is-vcentered is-centered"},[r("div",{staticClass:"column"},[t._v(t._s(t.$t("thereAreNoElements")))])])])],2)}),[],!1,null,null,null).exports,pt=r(83);function ht(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,r)}return e}function mt(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ht(Object(source),!0).forEach((function(e){Object(n.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):ht(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var vt={name:"HomePage",components:{Txs:ut,Statistics:m,Withdraw:E,Deposit:X},data:function(){return{activeTab:0}},computed:mt(mt(mt({},Object(o.e)("mixer",["selectedMixer"])),Object(o.c)("txHashKeeper",["addressExplorerUrl"])),Object(o.c)("metamask",["networkConfig"])),mounted:function(){this.$route.query.note&&(this.activeTab=1)},methods:{tabChanged:function(t){this.$route.query.note||this.$root.$emit("resetWithdraw"),1===t&&(Object(pt.getTornadoKeys)(),this.$store.dispatch("relayer/pickRandomRelayer",{},{root:!0}))},amountToParse:function(t){return t.toString().replace(".","")}}},bt=Object(h.a)(vt,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("b-notification",{staticClass:"main-notification",attrs:{type:"is-info","icon-pack":"icon","has-icon":"","aria-close-label":t.$t("closeNotification")}},[r("i18n",{attrs:{path:"indexNotification"},scopedSlots:t._u([{key:"link",fn:function(){return[r("a",{attrs:{href:"https://twitter.com/TornadoCash/status/1204745639759884289"}},[t._v(t._s(t.$t("indexNotificationLinkText")))])]},proxy:!0}])})],1),t._v(" "),r("div",{staticClass:"columns"},[r("div",{staticClass:"column is-half"},[r("b-tabs",{staticClass:"is-tornado",attrs:{animated:!1},on:{input:t.tabChanged},model:{value:t.activeTab,callback:function(e){t.activeTab=e},expression:"activeTab"}},[r("b-tab-item",{attrs:{label:t.$t("deposit")}},[r("Deposit")],1),t._v(" "),r("b-tab-item",{attrs:{label:t.$t("withdraw")}},[r("Withdraw")],1)],1),t._v(" "),r("div",{staticClass:"tab-with-corner is-left-bottom is-primary"},[r("span",{staticClass:"is-small"},[r("a",{staticClass:"has-text-primary",attrs:{target:"_blank",href:t.addressExplorerUrl(t.networkConfig.tokens[t.selectedMixer.currency].mixerAddress[t.selectedMixer.amount])}},[t._v(t._s(t.selectedMixer.currency+"-"+t.amountToParse(t.selectedMixer.amount)+".tornadocash.eth"))])])])],1),t._v(" "),r("Statistics")],1),t._v(" "),r("Txs")],1)}),[],!1,null,null,null);e.default=bt.exports}}]);