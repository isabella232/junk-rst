(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{1105:function(t,e,n){"use strict";n(24);var o=n(4),r={components:{},props:{onAction:{type:Function,required:!0},title:{type:String,required:!0},description:{type:String,default:"Please click Confirm to initiate the of your action"},warningMessage:{type:String,default:"You already have an active transaction, wait for its execution"},isWarning:{type:Boolean,default:!1}},data:function(){return{}},computed:{},methods:{handleAction:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.onAction();case 3:return e.prev=3,t.onClose(),e.finish(3);case 6:case"end":return e.stop()}}),e,null,[[0,,3,6]])})))()},onClose:function(){this.$emit("close")},openTxsHistory:function(){this.$router.push({path:"/mining/txs"}),this.onClose()}}},c=n(14),component=Object(c.a)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"modal-card box box-modal"},[n("header",{staticClass:"box-modal-header is-spaced"},[n("div",{staticClass:"box-modal-title"},[t._v(t._s(t.title))]),t._v(" "),n("button",{staticClass:"delete",attrs:{type:"button"},on:{click:t.onClose}})]),t._v(" "),n("p",{staticClass:"p is-size-6"},[t._v("\n    "+t._s(t.description)+"\n  ")]),t._v(" "),t.isWarning?n("b-notification",{staticClass:"main-notification",attrs:{type:"is-warning",closable:!1}},[n("strong",[t._v(t._s(t.$t("warning")))]),t._v("\n    "+t._s(t.warningMessage)+"\n    "),n("b-button",{attrs:{type:"is-primary-link",size:"is-underlined"},on:{click:t.openTxsHistory}},[t._v("\n      "+t._s(t.$t("openTxsHistory"))+"\n    ")])],1):t._e(),t._v(" "),n("div",{staticClass:"buttons buttons__halfwidth"},[n("b-button",{attrs:{type:"is-primary",outlined:""},on:{click:t.onClose}},[t._v("\n      "+t._s(t.$t("cancelButton"))+"\n    ")]),t._v(" "),n("b-button",{attrs:{type:"is-primary"},on:{click:t.handleAction}},[t._v("\n      "+t._s(t.$t("confirm"))+"\n    ")])],1)],1)}),[],!1,null,null,null);e.a=component.exports},1106:function(t,e,n){"use strict";n(58),n(37),n(32),n(51),n(29),n(30),n(21);var o=n(23),r=n(26),c=n(279);function l(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function d(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?l(Object(source),!0).forEach((function(e){Object(o.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):l(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var m=n(8).fromWei,v={components:{NumberFormat:c.a},computed:d(d(d({},Object(r.c)("account",["currentRewardBalance"])),Object(r.e)("torn",{balance:function(t){return m(t.balance)}})),{},{getBalance:function(){return this.currentRewardBalance.toString()}})},h=n(14),component=Object(h.a)(v,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"columns mining-columns is-multiline is-centered is-mobile"},[n("div",{staticClass:"column is-balance"},[n("div",{staticClass:"info-name"},[t._v(t._s(t.$t("accountBalance")))]),t._v(" "),n("div",{staticClass:"info-value has-tooltip"},[n("span",[n("number-format",{attrs:{value:t.getBalance}}),t._v(" AP")],1),t._v(" "),n("b-tooltip",{attrs:{position:"is-top",label:t.$t("apTooltip"),multilined:""}},[n("button",{staticClass:"button is-primary has-icon"},[n("span",{staticClass:"icon icon-info"})])])],1),t._v(" "),n("div",{staticClass:"info-line"})]),t._v(" "),t._t("default"),t._v(" "),n("div",{staticClass:"column is-balance has-text-right-desktop"},[n("div",{staticClass:"info-name"},[t._v(t._s(t.$t("publicBalance")))]),t._v(" "),n("div",{staticClass:"info-value"},[n("number-format",{attrs:{value:t.balance}}),t._v(" TORN")],1),t._v(" "),n("div",{staticClass:"info-line"})])],2)}),[],!1,null,null,null);e.a=component.exports},1131:function(t,e,n){"use strict";n.r(e);n(58),n(37),n(32),n(51),n(24);var o=n(4),r=(n(29),n(30),n(21),n(206),n(23)),c=n(1104),l=n(1105),d=n(8),m=n(26);function v(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function h(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?v(Object(source),!0).forEach((function(e){Object(r.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):v(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var f={components:{MiningColumns:n(1106).a},data:function(){return{amount:null,address:"",timer:null,stepAmount:1,minAmount:0,timerId:null,hasErrorAmount:!1,tokensToReceive:"0",rate:"0",showDetails:!1,totalWithdrawal:Object(d.toBN)("0")}},computed:h(h(h(h(h(h(h(h({},Object(m.c)("account",["account"])),Object(m.c)("farmer",["relayerFee"])),Object(m.c)("token",["toDecimals","fromDecimals"])),Object(m.c)("relayer",["checkActiveMiningJobs"])),Object(m.e)("metamask",["ethAccount"])),Object(m.e)("gasPrices",["fast"])),Object(m.e)("relayer",["selectedRelayer"])),{},{maxAmount:function(){return Object(d.toBN)(this.account.amount).toNumber()},isActiveJob:function(){return this.checkActiveMiningJobs},notEnoughPoints:function(){return"relayer"===this.withdrawType&&null!==this.amount&&Object(d.toBN)(this.amount).sub(Object(d.toBN)(this.relayerFee)).isNeg()},isValidAddress:function(){return Object(d.isAddress)(this.address)},isWithdrawDisabled:function(){return this.hasErrorAmount||!this.isValidAddress||!this.amount||this.totalWithdrawal.isNeg()},networkFee:function(){return Object(d.fromWei)(Object(d.toBN)(Object(d.toWei)(this.fast.toString(),"gwei")).mul(Object(d.toBN)(53e4)))},withdrawType:{get:function(){return this.$store.state.mixer.withdrawType},set:function(t){this.$store.commit("mixer/SET_WITHDRAW_TYPE",{withdrawType:t})}}}),watch:{amount:{handler:function(t){var e=this;clearTimeout(this.timerId),this.timerId=setTimeout((function(){e.hasErrorAmount=!1;var n=parseInt(t);""===t||n<e.minAmount?(n=parseInt(e.minAmount),e.hasErrorAmount=!0):n>e.maxAmount&&(n=e.maxAmount,e.hasErrorAmount=!0),e.amount=n,e.$store.commit("farmer/SAVE_AMOUNT",n),e.calculateTotal()}),1e3)}},address:{handler:function(address){this.$store.commit("farmer/SAVE_RECIPIENT_ADDRESS",address)}},withdrawType:{handler:function(){this.calculateTotal()}},selectedRelayer:{handler:function(){this.calculateTotal()}}},mounted:function(){var t=this;this.$store.dispatch("relayer/pickRandomRelayer",{},{root:!0}),this.timer=setTimeout((function(){t.address=t.ethAccount||""}),1e3)},beforeDestroy:function(){clearTimeout(this.timer)},methods:{openConfirmModal:function(){this.$buefy.modal.open({parent:this,component:l.a,hasModalCard:!0,width:440,props:{title:this.$t("confirmModal.withdraw.title"),isWarning:this.isActiveJob,onAction:this.withdrawReward,warningMessage:this.$t("confirmModal.withdraw.warningMessage"),description:this.$t("confirmModal.withdraw.description")}})},withdrawReward:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t.$store.dispatch("loading/enable",{message:t.$t("generatingProof")}),e.next=4,t.$store.dispatch("farmer/prepareWithdrawReward");case 4:return n="wallet"===t.withdrawType?"farmer/withdrawReward":"relayer/relayMiningWithdraw",e.next=7,t.$store.dispatch(n);case 7:t.amount=0,t.address=t.ethAccount||"",e.next=15;break;case 11:e.prev=11,e.t0=e.catch(0),console.error("withdrawReward",e.t0.message),t.$store.dispatch("notice/addNoticeWithInterval",{notice:{untranslatedTitle:e.t0.message,type:"danger"}});case 15:return e.prev=15,t.$store.dispatch("loading/disable"),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[0,11,15,18]])})))()},onSettings:function(){var t=this,e=this.withdrawType,n=this.selectedRelayer;this.$buefy.modal.open({parent:this,component:c.a,hasModalCard:!0,width:440,props:{total:{},currency:"TORN"},onCancel:function(){t.cancelSettingsEditing({withdrawType:e,relayer:n})},customClass:"is-pinned"})},cancelSettingsEditing:function(t){var e=t.withdrawType,n=t.relayer;this.$store.dispatch("relayer/setupRelayer",n),this.$store.commit("mixer/SET_WITHDRAW_TYPE",{withdrawType:e})},calculateTotal:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.totalWithdrawal="relayer"===t.withdrawType?Object(d.toBN)(t.amount||0).sub(Object(d.toBN)(t.relayerFee)):Object(d.toBN)(t.amount||0),!t.totalWithdrawal.lte(Object(d.toBN)(0))){e.next=6;break}t.tokensToReceive="0",t.rate="0",e.next=10;break;case 6:return e.next=8,t.$store.dispatch("farmer/getExpectedReturn",{});case 8:t.tokensToReceive=e.sent,t.rate=Object(d.toBN)(t.totalWithdrawal).mul(Object(d.toBN)(Math.pow(10,18))).div(Object(d.toBN)(t.tokensToReceive)).toString();case 10:case"end":return e.stop()}}),e)})))()}}},w=n(14),component=Object(w.a)(f,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"tab-item"},[n("mining-columns",[n("div",{staticClass:"column is-container"},[n("b-field",{attrs:{label:t.$t("amount")}},[n("b-field",{class:t.hasErrorAmount?"is-warning":""},[n("b-input",{ref:"amountInput",attrs:{type:"number",step:t.stepAmount,min:t.minAmount,max:t.maxAmount,"custom-class":"hide-spinner","use-html5-validation":!1,expanded:""},model:{value:t.amount,callback:function(e){t.amount=e},expression:"amount"}}),t._v(" "),n("div",{staticClass:"control has-text",on:{click:function(e){return t.$refs.amountInput.focus()}}},[n("span",[t._v("AP")])]),t._v(" "),n("div",{staticClass:"control has-button"},[n("button",{staticClass:"button is-primary is-small is-outlined",on:{mousedown:function(t){return t.preventDefault()},click:function(e){t.amount=t.maxAmount}}},[t._v("\n              "+t._s(t.$t("max"))+"\n            ")])])],1)],1),t._v(" "),n("b-field",{attrs:{label:t.$t("recipientAddress"),type:t.address?t.isValidAddress?"":"is-warning":""}},[n("b-input",{attrs:{expanded:""},model:{value:t.address,callback:function(e){t.address=e},expression:"address"}})],1),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.amount,expression:"amount"}],staticClass:"stats-columns"},[n("div",{directives:[{name:"show",rawName:"v-show",value:"relayer"===t.withdrawType,expression:"withdrawType === 'relayer'"}],staticClass:"stats-column"},[n("div",{staticClass:"info-name"},[t._v("\n            "+t._s(t.$t("relayerFee"))+"\n            "),n("b-tooltip",{attrs:{label:t.$t("withdrawRelayerTooltip"),position:"is-top",multilined:""}},[n("button",{staticClass:"button is-primary has-icon"},[n("span",{staticClass:"icon icon-info"})])])],1),t._v(" "),n("div",{staticClass:"info-value"},[t._v("-"+t._s(t.relayerFee)+" AP")])]),t._v(" "),n("div",{staticClass:"stats-column"},[n("div",{staticClass:"info-name"},[t._v(t._s(t.$t("totalWithdrawal")))]),t._v(" "),n("div",{staticClass:"info-value"},[t._v(t._s(t.totalWithdrawal)+" AP")])]),t._v(" "),n("div",{staticClass:"stats-column"},[n("div",{staticClass:"info-name"},[t._v("\n            "+t._s(t.$t("tokensToReceive"))+"\n            "),n("b-tooltip",{attrs:{label:t.$t("tokensToRecieveTooltip"),position:"is-top",multilined:""}},[n("button",{staticClass:"button is-primary has-icon"},[n("span",{staticClass:"icon icon-info"})])])],1),t._v(" "),n("div",{staticClass:"info-value"},[t._v(t._s(t.toDecimals(t.tokensToReceive,18,7))+" TORN")])]),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.showDetails,expression:"showDetails"}],staticClass:"stats-column"},[n("div",{staticClass:"info-name"},[t._v(t._s(t.$t("rate")))]),t._v(" "),n("div",{staticClass:"info-value"},[t._v("~"+t._s(t.rate)+" AP/TORN")])]),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.showDetails,expression:"showDetails"}],staticClass:"stats-column"},[n("div",{staticClass:"info-name"},[t._v(t._s(t.$t("networkFee")))]),t._v(" "),n("div",{staticClass:"info-value"},[t._v(t._s(t.networkFee)+" ETH")])]),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.showDetails,expression:"showDetails"}],staticClass:"stats-column"},[n("div",{staticClass:"info-name"},[t._v(t._s(t.$t("gasPrice")))]),t._v(" "),n("div",{staticClass:"info-value"},[t._v(t._s(t.fast)+" Gwei")])])]),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.amount&&!t.showDetails,expression:"amount && !showDetails"}],staticClass:"buttons is-centered"},[n("b-button",{attrs:{type:"is-text","icon-left":"more"},on:{click:function(e){t.showDetails=!0}}},[t._v("\n          "+t._s(t.$t("moreDetails"))+"\n        ")])],1),t._v(" "),n("div",{staticClass:"field is-grouped"},[n("p",{staticClass:"control is-expanded"},[n("b-tooltip",{attrs:{label:""+t.$t("notEnoughPoints"),position:"is-top",active:t.notEnoughPoints,multilined:""}},[n("b-button",{staticClass:"button is-primary",attrs:{type:"is-primary",outlined:"","icon-left":"arrow-up",disabled:t.isWithdrawDisabled,expanded:""},on:{click:t.openConfirmModal}},[t._v(t._s(t.$t("withdrawButton")))])],1)],1),t._v(" "),n("p",{staticClass:"control"},[n("b-button",{attrs:{type:"is-primary",outlined:"","icon-right":"settings"},on:{click:t.onSettings}})],1)])],1)])],1)}),[],!1,null,null,null);e.default=component.exports}}]);