(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{1125:function(t,e,o){"use strict";o.r(e);o(58),o(37),o(32),o(21),o(51);var r=o(23),n=o(26);o(29),o(30),o(103);function l(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(object);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,o)}return e}function c(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?l(Object(source),!0).forEach((function(e){Object(r.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):l(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var v=o(8),d=v.toBN,_=v.fromWei,h=v.toWei,m={props:{data:{type:Object,required:!0}},data:function(){return{timeId:null,countdown:!1,timer:null}},computed:c(c(c({},Object(n.e)("governance/gov",["proposals","voterReceipts"])),Object(n.e)("metamask",["ethAccount"])),Object(n.c)("txHashKeeper",["addressExplorerUrl"])),watch:{data:{handler:function(data){1e3*Number(data.startTime)>Date.now()&&data.endTime&&this.startTimer()},immediate:!0}},mounted:function(){var t=this;this.timer=setTimeout((function(){t.ethAccount&&t.fetchReceipt({id:t.data.id})}),2500)},beforeDestroy:function(){clearTimeout(this.timeId),clearTimeout(this.timer)},methods:c(c({},Object(n.b)("governance/gov",["castVote","executeProposal","fetchReceipt"])),{},{getStatusType:function(t){var e="";switch(t){case"awaitingExecution":case"active":e="is-primary";break;case"expired":e="is-gray";break;case"failed":case"defeated":e="is-danger";break;case"pending":case"timeLocked":e="is-warning";break;case"executed":e="is-violet"}return e},calculatePercent:function(t){var e=d(h(this.data.results.for.toString())).add(d(h(this.data.results.against.toString())));return e.isZero()?0:d(h(this.data.results[t].toString())).mul(d(100)).divRound(e).toNumber()},onCastVote:function(t){this.castVote({id:this.data.id,support:t})},onExecute:function(){this.executeProposal({id:this.data.id})},fromWeiToTorn:function(t){return _(t)},accurateHumanize:function(t){var e=this,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4,r=[{unit:"y",key:"yy"},{unit:"M",key:"MM"},{unit:"d",key:"dd"},{unit:"h",key:"hh"},{unit:"m",key:"mm"},{unit:"s",key:"ss"}],n=!1,l=0;return r.map((function(e){var o=e.unit,r=e.key;return{value:t.get(o),key:r}})).filter((function(t){var e=t.value;t.key;if(!1===n){if(0===e)return!1;n=!0}return l++,0!==e&&l<=o})).map((function(t){var e=t.value,o=t.key;return{value:e,key:1===e?o[0]:o}})).map((function(t){var o=t.value,r=t.key;return e.$moment.localeData().relativeTime(o,!0,r,!0)})).join(" ")},startTimer:function(){var t=this;this.timeId=setTimeout((function(){var e=t.$moment(t.data.endTime).diff(t.$moment());e>0?(t.countdown=t.accurateHumanize(t.$moment.duration(e,"millisecond")),t.startTimer()):t.countdown=!1}),1e3)}})},f=o(14);function k(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(object);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,o)}return e}function C(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?k(Object(source),!0).forEach((function(e){Object(r.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):k(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var y={components:{Proposal:Object(f.a)(m,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"proposal"},[o("div",{staticClass:"columns"},[o("div",{staticClass:"column is-7-tablet is-8-desktop"},[o("h1",{staticClass:"title"},[t._v(t._s(t.data.title))]),t._v(" "),o("div",{staticClass:"description"},[o("p",[t._v("\n          "+t._s(t.data.description)+"\n        ")])])]),t._v(" "),o("div",{staticClass:"column is-5-tablet is-4-desktop"},["awaitingExecution"!==t.data.status?o("div",{staticClass:"proposal-block"},[o("div",{staticClass:"title"},[t._v(t._s(t.$t("castYourVote")))]),t._v(" "),o("div",{staticClass:"buttons buttons__halfwidth"},[o("b-button",{attrs:{disabled:"active"!==t.data.status||!t.ethAccount,type:"is-primary","icon-left":"check",outlined:""},on:{click:function(e){return t.onCastVote(!0)}}},[t._v(t._s(t.$t("for")))]),t._v(" "),o("b-button",{attrs:{disabled:"active"!==t.data.status||!t.ethAccount,type:"is-danger","icon-left":"close",outlined:""},on:{click:function(e){return t.onCastVote(!1)}}},[t._v(t._s(t.$t("against")))])],1),t._v(" "),t.voterReceipts[t.data.id]&&t.voterReceipts[t.data.id].hasVoted?o("div",[t._v("\n          Your current vote:\n          "),o("span",{class:{"has-text-primary":t.voterReceipts[t.data.id].support,"has-text-danger":!t.voterReceipts[t.data.id].support}},[t._v(t._s(t.$n(t.fromWeiToTorn(t.voterReceipts[t.data.id].balance)))+" TORN")])]):t._e()]):o("div",{staticClass:"proposal-block"},[o("div",{staticClass:"title"},[t._v(t._s(t.$t("executeProposal")))]),t._v(" "),o("div",{staticClass:"buttons buttons__halfwidth"},[o("b-button",{attrs:{type:"is-primary","icon-left":"check",outlined:""},on:{click:t.onExecute}},[t._v(t._s(t.$t("execute")))])],1)]),t._v(" "),o("div",{staticClass:"proposal-block"},[o("div",{staticClass:"title"},[t._v(t._s(t.$t("currentResults")))]),t._v(" "),o("div",{staticClass:"label"},[t._v("\n          "+t._s(t.$t("for"))+" "+t._s(t.$n(t.data.results.for))+" TORN "),o("span",[t._v(t._s(t.calculatePercent("for"))+"%")])]),t._v(" "),o("b-progress",{attrs:{value:t.calculatePercent("for"),type:"is-primary"}}),t._v(" "),o("div",{staticClass:"label"},[t._v("\n          "+t._s(t.$t("against"))+" "+t._s(t.$n(t.data.results.against))+" TORN\n          "),o("span",[t._v(t._s(t.calculatePercent("against"))+"%")])]),t._v(" "),o("b-progress",{attrs:{value:t.calculatePercent("against"),type:"is-danger"}})],1),t._v(" "),o("div",{staticClass:"proposal-block"},[o("div",{staticClass:"title"},[t._v(t._s(t.$t("information")))]),t._v(" "),o("div",{staticClass:"columns is-multiline is-small",class:{"has-countdown":t.countdown}},[o("div",{staticClass:"column is-full-small"},[o("strong",[t._v(t._s(t.$t("proposalAddress")))]),t._v(" "),o("div",{staticClass:"value"},[o("a",{staticClass:"address",attrs:{href:t.addressExplorerUrl(t.data.target),target:"_blank"}},[t._v("\n                "+t._s(t.data.target)+"\n              ")])])]),t._v(" "),o("div",{staticClass:"column is-half-small"},[o("strong",[t._v(t._s(t.$t("id")))]),t._v(" "),o("div",{staticClass:"value"},[t._v(t._s(t.data.id))])]),t._v(" "),o("div",{staticClass:"column is-half-small"},[o("strong",[t._v(t._s(t.$t("status")))]),t._v(" "),o("div",{staticClass:"value"},[o("b-tag",{attrs:{type:t.getStatusType(t.data.status)}},[t._v(t._s(t.$t(t.data.status)))])],1)]),t._v(" "),o("div",{staticClass:"column is-half-small"},[o("strong",[t._v(t._s(t.$t("startDate")))]),t._v(" "),o("div",{staticClass:"value"},[t._v(t._s(t.$moment(t.data.startTime).format("llll")))])]),t._v(" "),o("div",{staticClass:"column is-half-small"},[o("strong",[t._v(t._s(t.$t("endDate")))]),t._v(" "),o("div",{staticClass:"value"},[t._v(t._s(t.$moment(t.data.endTime).format("llll")))])]),t._v(" "),t.countdown?o("div",{staticClass:"column is-full-small"},[o("strong",[t._v(t._s(t.$t("timerRemainingForVoting")))]),t._v(" "),o("div",{staticClass:"value"},[t._v("\n              "+t._s(t.countdown)+"\n            ")])]):t._e()])])])])])}),[],!1,null,null,null).exports,ProposalSkeleton:Object(f.a)({},(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"proposal"},[o("div",{staticClass:"columns"},[o("div",{staticClass:"column is-7-tablet is-8-desktop"},[o("h1",{staticClass:"title"},[o("b-skeleton",{attrs:{height:"24",width:"200"}})],1),t._v(" "),o("div",{staticClass:"description"},[o("b-skeleton",{attrs:{width:"60%"}}),t._v(" "),o("b-skeleton",{attrs:{width:"60%"}}),t._v(" "),o("b-skeleton",{attrs:{width:"60%"}}),t._v(" "),o("b-skeleton",{attrs:{width:"60%"}}),t._v(" "),o("b-skeleton",{attrs:{width:"60%"}})],1)]),t._v(" "),o("div",{staticClass:"column is-5-tablet is-4-desktop"},[o("div",{staticClass:"proposal-block"},[o("div",{staticClass:"title"},[t._v(t._s(t.$t("castYourVote")))]),t._v(" "),o("div",{staticClass:"buttons buttons__halfwidth"},[o("b-skeleton",{attrs:{height:"2.857em"}}),t._v(" "),o("b-skeleton",{attrs:{height:"2.857em"}})],1),t._v(" "),o("div",[o("b-skeleton",{attrs:{height:"21"}})],1)]),t._v(" "),o("div",{staticClass:"proposal-block"},[o("div",{staticClass:"title"},[t._v(t._s(t.$t("currentResults")))]),t._v(" "),o("div",{staticClass:"label"},[o("b-skeleton",{attrs:{width:"84",height:"21"}}),t._v(" "),o("span",[o("b-skeleton",{attrs:{width:"30",height:"21"}})],1)],1),t._v(" "),o("b-progress",{attrs:{value:0,type:"is-primary"}}),t._v(" "),o("div",{staticClass:"label"},[o("b-skeleton",{attrs:{width:"110",height:"21"}}),t._v(" "),o("span",[o("b-skeleton",{attrs:{width:"30",height:"21"}})],1)],1),t._v(" "),o("b-progress",{attrs:{value:0,type:"is-danger"}})],1),t._v(" "),o("div",{staticClass:"proposal-block"},[o("div",{staticClass:"title"},[t._v(t._s(t.$t("information")))]),t._v(" "),o("div",{staticClass:"columns is-multiline is-small"},[o("div",{staticClass:"column is-full-small"},[o("strong",[t._v(t._s(t.$t("proposalAddress")))]),t._v(" "),o("div",{staticClass:"value"},[o("b-skeleton",{attrs:{height:"21"}})],1)]),t._v(" "),o("div",{staticClass:"column is-half-small"},[o("strong",[t._v(t._s(t.$t("id")))]),t._v(" "),o("div",{staticClass:"value"},[o("b-skeleton",{attrs:{width:"20",height:"21"}})],1)]),t._v(" "),o("div",{staticClass:"column is-half-small"},[o("strong",[t._v(t._s(t.$t("status")))]),t._v(" "),o("div",{staticClass:"value"},[o("b-skeleton",{attrs:{width:"70",height:"21"}})],1)]),t._v(" "),o("div",{staticClass:"column is-half-small"},[o("strong",[t._v(t._s(t.$t("startDate")))]),t._v(" "),o("div",{staticClass:"value"},[o("b-skeleton",{attrs:{width:"70",height:"21"}})],1)]),t._v(" "),o("div",{staticClass:"column is-half-small"},[o("strong",[t._v(t._s(t.$t("endDate")))]),t._v(" "),o("div",{staticClass:"value"},[o("b-skeleton",{attrs:{width:"70",height:"21"}})],1)])])])])])])}),[],!1,null,null,null).exports},data:function(){return{timer:null}},computed:C(C(C({},Object(n.e)("governance/gov",["proposals"])),Object(n.c)("governance/gov",["isFetchingProposals"])),{},{proposal:function(){return this.proposals[this.$route.params.id-1]}}),mounted:function(){var t=this;this.timer=setTimeout((function(){t.fetchBalances(),t.fetchedLockedTimestamp(),t.fetchDelegatee(),t.fetchLatestProposalId()}),1500)},beforeDestroy:function(){clearTimeout(this.timer)},methods:C(C({},Object(n.b)("governance/gov",["fetchBalances","fetchProposals","fetchedLockedTimestamp","fetchDelegatee","fetchLatestProposalId"])),{},{onBack:function(){this.$router.push({path:"/governance"})}})},O=Object(f.a)(y,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("b-button",{attrs:{type:"is-back","icon-left":"arrow-left"},on:{click:t.onBack}},[t._v("\n    Back\n  ")]),t._v(" "),t.isFetchingProposals?o("ProposalSkeleton"):t.proposal?o("Proposal",{attrs:{data:t.proposal}}):o("div",[t._v(t._s(t.$t("proposalDoesNotExist")))])],1)}),[],!1,null,null,null);e.default=O.exports}}]);